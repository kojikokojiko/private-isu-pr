# private-isu-pr

PR TIMES 学生インターン課題
- Goを使用
- AWS EC2で競技者用インスタンス（x86_64）のAMIを用いて、EC2インスタンス（c6i.large）作成。
- 直接isuconUserにsshできるように、authorized_keysを設定。
- GitHubのDeployKeyを設定。
- webapp配下でgit initしてpush
- 時系列的にどのようなログが出て、どういう施策を打ったかはISSUEを見てもらった方が分かりやすいかと思いますが、あくまで自分用のログにと思って作ったので見にくかったら申し訳ありません。

注意
このIssueに貼ってある、nginxやスロークエリログの解析結果はベンチマーク一回分を都度計測したものとする。
nginxのログの計測の際には都度　/webapp/log_rotate.sh　を実行させている。



## 初期スコア
`{"pass":true,"score":628,"success":570,"fail":2,"messages":["リクエストがタイムアウトしました (POST /login)"]}`

## 最終スコア
`
{"pass":true,"score":101214,"success":100971,"fail":317,"messages":["ステータスコードが正しくありません: expected 200, got 500 (POST /)","ステータスコードが正しくありません: expected 422, got 500 (POST /)","リクエストがタイムアウトしました (POST /comment)","リクエストがタイムアウトしました (POST /register)"]}
`



# 総括
- ISUCON本やいろんな人のブログを見て、知識だけは何となく頭に入っていたが、実際ちゃんと手を動かして問題を解くのはほとんど初だったのでだいぶ苦労した。
- Goに不慣れなので、実装部分はほとんど先人のものを参考にさせてもらったので自力でバリバリコードをかけるようになりたい。
- 最終スコアでタイムアウト等が発生してしまったのことが悔やまれる。
- ベンチマーカインスタンスのお金をケチって、競技者用インスタンスでベンチマークを回していたので、ちゃんとベンチマーカ―と競技者用インスタンスを別々で解いたときにどういう違いが出るのか、、もう一回ちゃんと解きたい


## 気になったこと
- 最週スコアでタイムアウトが発生したこと。（commentsにindexを追加しただけでそれ以前は出てなかった、、）
- cliでmysqlを操作するときに、drop indexを実行させようとしたら処理が全く終わらなかった。調べたところによると結構時間がかかる事例があった。まだ調査が足りてないが、皆さんどうしているのか気になる。
- 




## 参考
- https://github.com/stefafafan/private-isu
- http://dsas.blog.klab.org/archives/pixiv-isucon2016-2.html
- ISUCON本
